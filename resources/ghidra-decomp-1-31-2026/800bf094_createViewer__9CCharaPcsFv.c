// Function: createViewer__9CCharaPcsFv
// Entry: 800bf094
// Size: 1420 bytes

/* WARNING: Removing unreachable block (ram,0x800bf604) */
/* WARNING: Removing unreachable block (ram,0x800bf5fc) */
/* WARNING: Removing unreachable block (ram,0x800bf5f4) */
/* WARNING: Removing unreachable block (ram,0x800bf0b4) */
/* WARNING: Removing unreachable block (ram,0x800bf0ac) */
/* WARNING: Removing unreachable block (ram,0x800bf0a4) */
/* WARNING: Struct "CGBaseObj": ignoring overlapping field "vtable" */

void createViewer__9CCharaPcsFv(int param_1)

{
  float fVar1;
  float fVar2;
  byte bVar3;
  CStage *pCVar4;
  byte *pbVar5;
  CFileCHandle *fileHandle;
  undefined4 uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  int iVar10;
  int iVar11;
  double dVar12;
  double dVar13;
  double dVar14;
  undefined local_2e8;
  undefined local_2e7;
  undefined local_2e6;
  undefined local_2e5;
  undefined4 local_2e4;
  undefined auStack_2e0 [4];
  undefined local_2dc;
  undefined local_2db;
  undefined local_2da;
  undefined local_2d9;
  undefined4 local_2d8;
  undefined auStack_2d4 [256];
  undefined4 local_1d4;
  Vec local_1d0;
  Vec local_1c4 [2];
  float local_1a8;
  float local_1a4;
  Vec aVStack_19c [4];
  undefined local_16c;
  undefined local_16b;
  undefined local_16a;
  undefined local_169;
  undefined4 local_98;
  uint uStack_94;
  undefined4 local_90;
  uint uStack_8c;
  longlong local_88;
  undefined4 local_80;
  uint uStack_7c;
  longlong local_78;
  undefined4 local_70;
  uint uStack_6c;
  longlong local_68;
  undefined4 local_60;
  uint uStack_5c;
  longlong local_58;
  
  memset(param_1 + 0xcc,0,0x18);
  pCVar4 = CreateStage__7CMemoryFUlPci(&Memory,0x177000,s_CCharaPcs_LoadModel_801da8c4,0);
  *(CStage **)(param_1 + 0xcc) = pCVar4;
  pCVar4 = CreateStage__7CMemoryFUlPci(&Memory,0x200000,s_CCharaPcs_LoadTexture_801da8d8,0);
  *(CStage **)(param_1 + 0xd0) = pCVar4;
  pCVar4 = CreateStage__7CMemoryFUlPci(&Memory,0x190000,s_CCharaPcs_LoadAnim_801da8f0,0);
  *(CStage **)(param_1 + 0xd4) = pCVar4;
  *(undefined *)(param_1 + 0xe8) = 0x3f;
  fVar1 = FLOAT_80330be8;
  uVar7 = countLeadingZeros(0);
  *(undefined *)(param_1 + 0xe9) = 0x3f;
  fVar2 = FLOAT_80330c28;
  *(undefined *)(param_1 + 0xea) = 0x3f;
  uVar8 = countLeadingZeros(1);
  bVar3 = -((byte)(uVar7 >> 5) & 1) & 0x3f;
  *(undefined *)(param_1 + 0xeb) = 0xff;
  dVar13 = DOUBLE_80330c10;
  *(byte *)(param_1 + 0xf0) = bVar3;
  dVar14 = DOUBLE_80330be0;
  uVar7 = countLeadingZeros(2);
  *(byte *)(param_1 + 0xf1) = bVar3;
  dVar12 = (double)FLOAT_80330c2c;
  uVar9 = 0;
  *(byte *)(param_1 + 0xf2) = bVar3;
  bVar3 = -((byte)(uVar8 >> 5) & 1) & 0x3f;
  *(undefined *)(param_1 + 0xf3) = 0xff;
  *(float *)(param_1 + 0x108) = fVar1;
  *(float *)(param_1 + 0x10c) = fVar1;
  *(float *)(param_1 + 0x110) = fVar2;
  *(byte *)(param_1 + 0xf4) = bVar3;
  *(byte *)(param_1 + 0xf5) = bVar3;
  *(byte *)(param_1 + 0xf6) = bVar3;
  bVar3 = -((byte)(uVar7 >> 5) & 1) & 0x3f;
  *(undefined *)(param_1 + 0xf7) = 0xff;
  *(float *)(param_1 + 0x114) = fVar1;
  *(float *)(param_1 + 0x118) = fVar1;
  *(float *)(param_1 + 0x11c) = fVar2;
  *(byte *)(param_1 + 0xf8) = bVar3;
  *(byte *)(param_1 + 0xf9) = bVar3;
  *(byte *)(param_1 + 0xfa) = bVar3;
  *(undefined *)(param_1 + 0xfb) = 0xff;
  *(float *)(param_1 + 0x120) = fVar1;
  *(float *)(param_1 + 0x124) = fVar1;
  *(float *)(param_1 + 0x128) = fVar2;
  iVar10 = param_1;
  do {
    pbVar5 = (byte *)__ct__6CColorFUcUcUcUc(auStack_2e0,0xff,0xff,0xff,0xff);
    __ct__6CColorFv(&local_2e8);
    uStack_8c = uVar9 ^ 0x80000000;
    uStack_94 = (uint)*pbVar5;
    local_90 = 0x43300000;
    local_98 = 0x43300000;
    fVar1 = (float)((double)(float)((double)CONCAT44(0x43300000,uStack_8c) - dVar14) * dVar12);
    local_80 = 0x43300000;
    local_70 = 0x43300000;
    local_60 = 0x43300000;
    iVar11 = (int)((float)((double)CONCAT44(0x43300000,uStack_94) - dVar13) * fVar1);
    local_88 = (longlong)iVar11;
    local_2e8 = (undefined)iVar11;
    uStack_7c = (uint)pbVar5[1];
    iVar11 = (int)((float)((double)CONCAT44(0x43300000,uStack_7c) - dVar13) * fVar1);
    local_78 = (longlong)iVar11;
    local_2e7 = (undefined)iVar11;
    uStack_6c = (uint)pbVar5[2];
    iVar11 = (int)((float)((double)CONCAT44(0x43300000,uStack_6c) - dVar13) * fVar1);
    local_68 = (longlong)iVar11;
    local_2e6 = (undefined)iVar11;
    uStack_5c = (uint)pbVar5[3];
    iVar11 = (int)((float)((double)CONCAT44(0x43300000,uStack_5c) - dVar13) * fVar1);
    local_58 = (longlong)iVar11;
    local_2e5 = (undefined)iVar11;
    __ct__6CColorFR6CColor(&local_2dc,&local_2e8);
    uVar9 = uVar9 + 1;
    *(undefined *)(iVar10 + 300) = local_2dc;
    *(undefined *)(iVar10 + 0x12d) = local_2db;
    *(undefined *)(iVar10 + 0x12e) = local_2da;
    *(undefined *)(iVar10 + 0x12f) = local_2d9;
    iVar10 = iVar10 + 4;
  } while ((int)uVar9 < 5);
  local_2d8 = 0x404040ff;
  local_2e4 = 0x404040ff;
  SetCopyClear__8CGraphicF8_GXColori(&Graphic,&local_2e4);
  *(undefined4 *)(param_1 + 400) = 0;
  fVar1 = FLOAT_80330be8;
  *(undefined4 *)(param_1 + 0x198) = 0;
  *(undefined4 *)(param_1 + 0x2b0) = 0;
  *(undefined4 *)(param_1 + 0x194) = 0;
  *(undefined4 *)(param_1 + 0x19c) = 0;
  *(undefined4 *)(param_1 + 0x2b4) = 0;
  *(undefined4 *)(param_1 + 0x1a0) = 0;
  *(undefined4 *)(param_1 + 0x2b8) = 0;
  *(undefined4 *)(param_1 + 700) = 0;
  *(undefined4 *)(param_1 + 0x3c0) = 0;
  *(undefined4 *)(param_1 + 0x4c4) = 0;
  *(undefined4 *)(param_1 + 0x5c8) = 0;
  *(undefined4 *)(param_1 + 0x6f4) = 0;
  *(undefined4 *)(param_1 + 0x6f8) = 1;
  *(undefined4 *)(param_1 + 0x6fc) = 0;
  *(float *)(param_1 + 0x700) = fVar1;
  *(undefined4 *)(param_1 + 0x704) = 0;
  *(undefined4 *)(param_1 + 0x708) = 0;
  *(undefined4 *)(param_1 + 0x70c) = 0;
  *(undefined4 *)(param_1 + 0x710) = 0;
  *(undefined4 *)(param_1 + 0x1a4) = 0;
  *(undefined4 *)(param_1 + 0x1a8) = 0;
  *(undefined4 *)(param_1 + 0x1ac) = 0;
  iVar11 = 2;
  iVar10 = param_1;
  do {
    *(undefined4 *)(iVar10 + 0x1b0) = 0;
    *(undefined4 *)(iVar10 + 0x1b4) = 0;
    *(undefined4 *)(iVar10 + 0x1b8) = 0;
    *(undefined4 *)(iVar10 + 0x1bc) = 0;
    *(undefined4 *)(iVar10 + 0x1c0) = 0;
    *(undefined4 *)(iVar10 + 0x1c4) = 0;
    *(undefined4 *)(iVar10 + 0x1c8) = 0;
    *(undefined4 *)(iVar10 + 0x1cc) = 0;
    *(undefined4 *)(iVar10 + 0x1d0) = 0;
    *(undefined4 *)(iVar10 + 0x1d4) = 0;
    *(undefined4 *)(iVar10 + 0x1d8) = 0;
    *(undefined4 *)(iVar10 + 0x1dc) = 0;
    *(undefined4 *)(iVar10 + 0x1e0) = 0;
    *(undefined4 *)(iVar10 + 0x1e4) = 0;
    *(undefined4 *)(iVar10 + 0x1e8) = 0;
    *(undefined4 *)(iVar10 + 0x1ec) = 0;
    *(undefined4 *)(iVar10 + 0x1f0) = 0;
    *(undefined4 *)(iVar10 + 500) = 0;
    *(undefined4 *)(iVar10 + 0x1f8) = 0;
    *(undefined4 *)(iVar10 + 0x1fc) = 0;
    *(undefined4 *)(iVar10 + 0x200) = 0;
    *(undefined4 *)(iVar10 + 0x204) = 0;
    *(undefined4 *)(iVar10 + 0x208) = 0;
    *(undefined4 *)(iVar10 + 0x20c) = 0;
    *(undefined4 *)(iVar10 + 0x210) = 0;
    *(undefined4 *)(iVar10 + 0x214) = 0;
    *(undefined4 *)(iVar10 + 0x218) = 0;
    *(undefined4 *)(iVar10 + 0x21c) = 0;
    *(undefined4 *)(iVar10 + 0x220) = 0;
    *(undefined4 *)(iVar10 + 0x224) = 0;
    *(undefined4 *)(iVar10 + 0x228) = 0;
    *(undefined4 *)(iVar10 + 0x22c) = 0;
    iVar10 = iVar10 + 0x80;
    iVar11 = iVar11 + -1;
  } while (iVar11 != 0);
  strcpy(param_1 + 0x2c0,s_plot_kmitsuru_plot_chm_801da904);
  *(undefined4 *)(param_1 + 700) = 1;
  strcpy(param_1 + 0x5f4,s_plot_kmitsuru_plot_chd_801da91c);
  *(undefined4 *)(param_1 + 0x5f0) = 1;
  strcpy(param_1 + 0x3c4,s_plot_kmitsuru_plot_cha_801da934);
  *(undefined4 *)(param_1 + 0x3c0) = 1;
  strcpy(param_1 + 0x4c8,s_plot_kmitsuru_plot_tex_801da94c);
  *(undefined4 *)(param_1 + 0x4c4) = 1;
  strcpy(param_1 + 0x5cc,&DAT_80330c44);
  *(undefined4 *)(param_1 + 0x5ec) = 0xffffffff;
  *(undefined4 *)(param_1 + 0x5c8) = 1;
  sprintf(auStack_2d4,s__sback_tex_801da964,0x8024402c);
  fileHandle = (CFileCHandle *)Open__5CFileFPcUlQ25CFile3PRI(&File,auStack_2d4,0,0);
  if (fileHandle != (CFileCHandle *)0x0) {
    Read__5CFileFPQ25CFile7CHandle(&File,fileHandle);
    SyncCompleted__5CFileFPQ25CFile7CHandle(&File,fileHandle);
    uVar6 = createTextureSet__9CCharaPcsFPvi(param_1,File.m_readBuffer,0);
    *(undefined4 *)(param_1 + 0x2b8) = uVar6;
    Close__5CFileFPQ25CFile7CHandle(&File,fileHandle);
  }
  __ct__Q29CLightPcs10CBumpLightFv(&local_1d4);
  local_1d4 = 1;
  local_1d0.x = FLOAT_80330c48;
  local_1d0.y = FLOAT_80330c4c;
  local_1d0.z = FLOAT_80330c50;
  local_1c4[0].x = FLOAT_80330c54;
  local_1c4[0].y = FLOAT_80330c58;
  local_1c4[0].z = FLOAT_80330c5c;
  PSVECSubtract(local_1c4,&local_1d0,aVStack_19c);
  PSVECNormalize(aVStack_19c,aVStack_19c);
  local_16a = 0;
  local_16c = 0x80;
  local_16b = 0x80;
  local_169 = 0xff;
  local_1a8 = FLOAT_80330be8;
  local_1a4 = FLOAT_80330be8;
  DAT_8032edc0 = AddBump__9CLightPcsFPQ29CLightPcs6CLightQ29CLightPcs6TARGETPQ27CMemory6CStagei
                           (&LightPcs,&local_1d4,0,(CStage *)Chara._8280_4_,4);
  Create__6CCharaFv(&Chara);
  return;
}

